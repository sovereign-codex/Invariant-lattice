{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Collective Learning Event",
  "description": "A record of cross-agent learning applied to a Meta-Hash or candidate invariant.",
  "type": "object",
  "required": [
    "cl_event_id",
    "timestamp",
    "meta_hash_id",
    "contributors",
    "learning_type",
    "effect"
  ],
  "properties": {
    "cl_event_id": {
      "type": "string",
      "description": "Unique identifier for this collective learning event"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "meta_hash_id": {
      "type": "string",
      "description": "Target Meta-Hash or candidate ID"
    },
    "contributors": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["agent_id", "agent_type"],
        "properties": {
          "agent_id": { "type": "string" },
          "agent_type": {
            "type": "string",
            "enum": ["model", "avot", "human", "system"]
          }
        }
      }
    },
    "learning_type": {
      "type": "string",
      "enum": [
        "corroboration",
        "refinement",
        "correction",
        "boundary_clarification",
        "deprecation_signal"
      ]
    },
    "effect": {
      "type": "object",
      "properties": {
        "confidence_delta": { "type": "number" },
        "trust_level_delta": { "type": "integer" },
        "added_boundary": { "type": "string" },
        "added_failure_mode": { "type": "string" },
        "notes": { "type": "string" }
      }
    },
    "applied": {
      "type": "boolean",
      "description": "Whether this event was applied to the Meta-Hash"
    }
  }
}